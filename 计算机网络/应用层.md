网络层协议特点注意：网络核心设备并不在应用层起作用，而只在较低层起作用，即应用层软件交互是在传输层实现的

*网络应用程序体系结构：
- 客户-服务器体系：一个always-open主机作为服务器，为客户提供服务
- P2P体系：对等体系，无需中间商交互，直接共享信息

*进程通信：
- 通信方式：进程通过套接字(soket)的软件接口向网络发送或接收报文，其中，报文在网络传输层通过TCP或UDP进行数据传递
- 寻址方式：通过寻找(服务器)主机IP地址和端口号进行进程寻址

*应用程序服务质量指标：
- 可靠数据传输：数据传输时的分组丢失情况
- 吞吐量：进程间进行数据交互的速率bps
- 定时：时间限制，保证每个字节数据到达时间之间的间隔，参考视频加载
- 安全性：加解密，保证运输协议能提供一种或多种安全服务

*因特网提供的运输服务：
- TCP/IP服务：面向连接服务和可靠的数据传输，默认端口号80
	- 特点：
		- 面向连接：数据报文流动前，TCP让服务器和客户端交换运输层的控制信息，这就是握手，在握手过后，一个TCP连接就建立了
		- 可靠的数据传输：通信进程能够依靠 TCP, 无差错、按适当顺序交付所有发送的数据。没有数据冗余和丢失
		- 拥塞控制机制：当传输过程出现拥塞时停止传输
	- SSL(Secure Socket Layer)：安全套接字层，用以在应用层加强TCP，对套接字进行加解密
- UDP服务：仅提供最小服务的轻量级运输协议，不保证数据完整性，没有握手过程，没有拥塞机制，

*应用层协议：
- 作用：定义运行在不同端系统上时的报文交换形式，包括报文交换类型，报文语法，字段语义，进程间发送和响应报文的规则
- 类别：SMTP（电子邮件）Telnet（远程终端访问）Http（web、流式多媒体）FTP（文件传输）SIP、RTP（因特网电话）

*HTTP协议*
- 概述：全称超文本传输协议，确定服务器客户端结构，明确报文类型，报文由对象构成，html页面，图片等都可被称为一个对象。运输层使用TCP进行数据传输。
- 非持续连接：
	- 1、HTTP客户端在80端口号发起一个到服务器的TCP连接，在客户端和服务器上分别有一个socket于该连接相关联，服务器接收连接并返回给客户端
	- 2、HTTP客户端向服务器发送请求
	- 3、HTTP服务器获取请求，检索URL并返回响应报文
	- 4、HTTP服务器进程通知TCP关闭TCP连接
	- 5、HTTP客户端接收报文，TCP连接关闭
	- 6、对每个请求文件重复1~5操作
	- 其中，一次往返被称为一个往返时间RTT，总往返时间为：2 \* RTT+传输时间
- 持续连接：
	- 特点：服务器返回响应后仍保持TCP连接，相同客户端和服务器的后续请求和响应报文通过相同连接传递，从而节省建立TCP连接的时间
	- 非流水持续方式：只有上一个请求响应后进行下一个请求
	- 流水持续方式：请求持续发送，无需等待，http1.1默认方式

*DNS域名解析系统*
- 主要目的：1、进行主机域名到IP地址的解析2、主机别名和规范名字的转换（别名——正规名字——IP地址）
- DNS域名结构：倒树级结构，逐层向上直到树根——主机域名.三级域.(二级域).顶级域
- DNS查询：
	- 本地服务器：当主机发起一个DNS查询时，查询被送到本地服务器完成
	- 递归查询：从本地服务器到根服务器，由根服务器从树根到顶级域，逐层往树叶查找
	- 迭代查询：由本地服务器从根服务器开始逐层查询，减少根服务器负载
- DNS缓存：当服务器使用了一个映射，就将该映射缓存起来，从而提高查询效率
- DDoS攻击：对根服务器进行流量轰炸，从而使查询阻塞

*P2P模式*
- 文件分发模式：
- C/S模式：由服务器进行资源传输，每个客户端独立接收，需要上传N份文件
	- 分发耗时：$D_{C/S}>=max(NF/d_{up},F/d_{min})$，服务器上传N份文件，上传时间为NF/d，客户端并行下载，故F/d决定下载耗时，总耗时由N决定，线性增加
- P2P模式：除了服务器上载，所有客户端节点都可以上载，故随着客户量增多，总耗时增加速率变缓
	- 分发耗时：$D_{P2P}$ >= max{F/us,,F/dmin,,NF/(us + $\sum$ui)}

*视频流化服务和CDN*
- 多媒体流化技术：
	- 服务端将视频文件分割成多个块，
	- 每个块独立存储，编码于不同码率
	- 告示文件：提供不同块的URL
	- 客户端先获取告示文件，根据告示文件动态请求不同的块从而实现流化播放
- CDN：内容分发网络
	- 通过将内容缓存到离用户较近的服务器节点上，提高内容访问速度和可靠性。

